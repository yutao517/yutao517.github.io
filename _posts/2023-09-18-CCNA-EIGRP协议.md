---
layout: article
title: CCNA-EIGRP协议
tags: 计算机网络
category: blog
date: 2023-09-18 00:00:00 +08:00
mermaid: true
---
## EIGRP
**EIGRP---思科私有**

协议好坏：路由切换速度；计算路由准确度

**三张表**
- 路由表---最终选路标准
- 拓扑表---R1将路由表发送给R2，R2暂存到拓扑表，计算拓扑表最优的，更新路由表
- 邻居表---EIGRP有邻居概念，如果邻居中断（hello包检测），那么就会删除该邻居的路由表。

EIGRP特点如下：
采用不定期触发更新，即只在路由器改变计量标准成拓扑出现变化时发送部分更新路由；更新条目中包含掩码，支持VLSM（RIPV2也支持）；具有相同的自治系统号的EIGRP和IGRP之间，可无缝交换路由信息。

EIGRP主要功能：
- 通过协议相关模块支持IP IPX,Apple Tallk
- 支持**VLSM**（可变长子网掩码）和CIDR（超网，支持更新类似192.0.0.0的网段）
- 有效邻居发现
- 基于可靠传输协议( RTP）的通信
- 基于弥散更新算法(DUAL）的最佳路径的


**邻居发现**
EIGRP路由器彼此交换路由必须是邻居，建立邻居关系
要满足以下三点：
- 收到hello或ACK（5s发送一次hello包，15s没收到邻居中断）
- 匹配AS号 (router eigrp xxx，这个xxx就说AS自治系统号）
- 相同度量（不同方向接收到了相同的路由条目来自相同协议，比较度量值：带宽、延迟、可靠性、负载、MTU，默认参考带宽和延迟），要有相同的参考度量


**术语**：
- 可行距离（FD）：当前设备到达目标网段的全程距离
- 被报告距离值（AD）：邻居设备到达目标网段的全程距离
- 继任者：最优线路的下一跳设备
- 可行继任者：备份线路下一跳设备
- 可靠传输协议（RTP）：是用来管理EIGRP数据包的发送和接受的协议。发送路由器将更新信息发送到组播IP地址224.0.0.10，每一个接收可靠组播数据包的邻居都会发送一个单播的确认数据包。如果EIGRP没有从某个邻居那里得到应答，它将使用单播来重发同样的数据，如果在16次单播尝试后，它仍然没有应答，则此邻居将被宣告消失。
- 弥散更新算法（DUAL）：EIGRP确定最佳无环路径和无环备用路径的方法，找邻居扩散消息(找备胎)。


```bash
router eigrp 100  #100是AS
no auto summary #关闭自动汇总网段，自动汇总会导致黑洞
network 192.168.1.0 0.0.0.255 #反掩码，用255.255.255.255减去它
show ip eigrp neighbors #查看邻居表
show ip eigrp topology #查看拓扑表
show ip route eigrp #只查看eigrp的路由表,显示出来的[管理距离/度量值（FD可行距离）]
show ip protocols #查看本地运行的协议
```
